#***************************************************************************/
#**    Author: Joey Azofeifa                                               */
#**    Date:   7/8/2015	                                                   */
#**    Description: Makefile for Exponential-Gaussian-Uniform Mixture Model*/
#***************************************************************************/

CXX             = /usr/local/bin/mpic++
CXXFLAGS        = -Wno-unused-variable -Wno-non-virtual-dtor -std=c++11 -openmp -Wno-write-strings 
EXEC            = ${PWD}/EMGU
ARCH  			= getconf LONG_BIT

CPP_FLAGS_32  	= -D32_BIT
CPP_FLAGS_64  	= -D64_BIT

GCCVERSION 		= $(shell gcc --version | grep ^gcc | sed 's/^.* //g')

NU_FIT: main.o load.o split.o model.o across_segments.o template_matching.o read_in_parameters.o model_selection.o MPI_comm.o
	@${CXX} ${CXXFLAGS}  ${PWD}/main.o ${PWD}/load.o ${PWD}/model_selection.o \
	${PWD}/split.o ${PWD}/model.o ${PWD}/across_segments.o  \
	${PWD}/template_matching.o ${PWD}/read_in_parameters.o ${PWD}/MPI_comm.o -o ${EXEC}
	@echo "========================="
	@echo Sucessfully Compiled

main.o: 
	@echo "========================="
	@${CXX} -c ${CXXFLAGS} ${PWD}/main.cpp -o ${PWD}/main.o
	@echo Compiled main

MPI_comm.o: 
	@${CXX} -c ${CXXFLAGS} ${PWD}/MPI_comm.cpp -o ${PWD}/MPI_comm.o
	@echo Compiled MPI_comm

load.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/load.cpp -o ${PWD}/load.o
	@echo Compiled load
model_selection.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/model_selection.cpp -o ${PWD}/model_selection.o
	@echo Compiled model_selection
split.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/split.cpp -o ${PWD}/split.o
	@echo Compiled split

model.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/model.cpp -o ${PWD}/model.o
	@echo Compiled model
across_segments.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/across_segments.cpp -o ${PWD}/across_segments.o
	@echo Compiled across_segments

template_matching.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/template_matching.cpp -o ${PWD}/template_matching.o
	@echo Compiled template_matching
read_in_parameters.o:
	@${CXX} -c ${CXXFLAGS} ${PWD}/read_in_parameters.cpp -o ${PWD}/read_in_parameters.o
	@echo Compiled read_in_parameters




clean:
	@rm -f *.o


		

